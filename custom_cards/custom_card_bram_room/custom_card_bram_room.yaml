---
card_bram_room:
  tap_action:
    action: "more-info"
  color: "var(--google-grey-500)"
  show_icon: false
  show_name: true
  show_label: true
  template:
    - "ulm_translation_engine"
  size: "20px"
  label: >-
    [[[
        var label = '<span style="display: flex;">';
        if (variables.climate_id && states[variables.climate_id]) {
          label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px" icon="mdi:thermometer"></ha-icon>';
          label += states[variables.climate_id].attributes.current_temperature + "°C";
        }
        else if(variables.temperature_sensor && states[variables.temperature_sensor]) {
          label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px" icon="mdi:thermometer"></ha-icon>';
          label += states[variables.temperature_sensor].state + "°C";
        }
        if (variables.show_pct) {
          if (entity.state == "on"){
            label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px" icon="mdi:brightness-6"></ha-icon>';
            var bri = Math.round(entity.attributes.brightness / 2.55);
            label += (bri ? bri + "%" : variables.ulm_translation_state) ;
          } else{
            label += variables.ulm_translation_state;
          }
        }
        label += '</span>';
        label += '<span style="display: flex;">';
        if  (variables.sensor1_id && states[variables.sensor1_id]) {
          if(states[variables.sensor1_id].state == "on") {
            label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px;" icon="' + variables.icon1_on + '"></ha-icon>';
          } else if (variables.icon1_off) {
            label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px;" icon="' + variables.icon1_off + '"></ha-icon>';
          }
        }
        if  (variables.sensor2_id && states[variables.sensor2_id]) {
          if(states[variables.sensor2_id].state == "on") {
            label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px;" icon="' + variables.icon2_on + '"></ha-icon>';
          } else if (variables.icon2_off) {
            label += '<ha-icon id="motion" style="height: 12px; margin-top: -2px;" icon="' + variables.icon2_off + '"></ha-icon>';
          }
        }
        label += '</span>';
        return label;
        
    ]]]
  styles:
    card:
      - border-radius: "20px"
      - box-shadow: "var(--box-shadow)"
      - padding: "12px"
      - background: >- 
          [[[
            if (variables.background_url) {
              var factor = "0.6";
              if (entity.state == "on") {
                factor = "0.3";
              }
              return 'linear-gradient(to right, rgba(var(--rgb-card-background-color), ' + factor + '), rgba(var(--rgb-card-background-color), ' + factor + ')), url("' + variables.background_url + '") no-repeat center center/cover'
            } else {
              return 'var( --ha-card-background, var(--card-background-color, white) );'
            }
          ]]]
    grid:
      - grid-template-areas: "'i toggle' 'n n' 'l l'"
      - grid-template-columns: "1fr 1fr"
      - grid-template-rows: "min-content"
    icon:
      - color: "rgba(var(--color-theme),0.2)"
    img_cell:
      - background-color: "rgba(var(--color-theme),0.05)"
      - border-radius: "50%"
      - place-self: "center"
      - width: "42px"
      - height: "42px"
    name:
      - align-self: "end"
      - justify-self: "start"
      - font-weight: "bold"
      - font-size: "14px"
      - margin-left: "12px"
      - margin-top: "12px"
    label:
      - justify-self: "start"
      - align-self: "start"
      - font-weight: "bolder"
      - display: "flex"
      - width: "90%"
      - justify-content: "space-between"
      - font-size: "12px"
      - filter: "opacity(60%)"
      - margin-left: "12px"
      - min-height: "10px"
    state:
      - justify-self: "start"
      - align-self: "start"
      - font-weight: "bolder"
      - font-size: "12px"
      - filter: "opacity(40%)"
      - margin-left: "12px"
    motion:
      - width: "13px"
      - margin-left: "15px"
  custom_fields:
    toggle:
      card:
        entity: "[[[ return entity.entity_id ]]]"
        name: "[[[ return name ]]]"
        state:
          - value: "on"
            icon: "mdi:lightbulb"
            styles:
              icon:
                - color: "rgba(var(--color-yellow),1)"
              img_cell:
                - background-color: "rgba(var(--color-yellow), 0.2)"
          - value: "off"
            icon: "mdi:lightbulb-off"
        tap_action:
          action: "toggle"
        type: "custom:button-card"
        template: "widget_icon"